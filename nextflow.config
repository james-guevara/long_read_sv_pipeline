params.account = "ddp195"

profiles {
	slurm {
		executor {
			name = "slurm"
			queueSize = 10
			pollInterval = "5 sec"
			submitRateLimit = "10/2min"
			maxRetries = 1
			retry.delay = "5min"
			retry.maxDelay = "10min"
		}
		process {
			clusterOptions = "--account ${params.account} --time 01:00:00 --cpus-per-task 4 --mem 8G --partition ind-shared --ntasks 1 --nodes 1"
			withName:MAP { 
				clusterOptions = "--account ${params.account} --time 01:00:00 --cpus-per-task 12 --mem 24G --partition ind-shared --ntasks 1 --nodes 1" 
				cpus = 12
			}
			withName:ADD_READGROUP { 
				cpus = 4
			}
			withName:INDEX_BAM { 
				cpus = 4
			}
			withName:COVERAGE { 
				clusterOptions = "--account ${params.account} --time 01:00:00 --cpus-per-task 8 --mem 16G --partition ind-shared --ntasks 1 --nodes 1"
				cpus = 8
			}
                }
	}
}


dag { enabled = true }
report { enabled = true }
timeline { enabled = true }
trace { enabled = true }
